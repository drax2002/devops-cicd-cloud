<!DOCTYPE html>
<html>
<head>
  <title>To-Do List Demo</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    li.done { text-decoration: line-through; color: gray; }
  </style>
</head>
<body>
  <h1>Simple To-Do List</h1>
  <input id="task" placeholder="Add task" />
  <button onclick="addTask()">Add</button>
  <ul id="todos"></ul>

  <script>
    async function fetchTodos() {
      const res = await fetch('/api/todos');
      const todos = await res.json();
      const ul = document.getElementById('todos');
      ul.innerHTML = '';
      todos.forEach((t, i) => {
        const li = document.createElement('li');
        li.textContent = t.task;
        if(t.done) li.classList.add('done');
        li.onclick = () => toggleDone(i);
        const del = document.createElement('button');
        del.textContent = 'Delete';
        del.onclick = (e) => { e.stopPropagation(); deleteTask(i); };
        li.appendChild(del);
        ul.appendChild(li);
      });
    }

    async function addTask() {
      const task = document.getElementById('task').value;
      if (!task) return;
      await fetch('/api/todos', { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify({task}) });
      document.getElementById('task').value = '';
      fetchTodos();
    }

    async function toggleDone(i) { await fetch(`/api/todos/${i}`, { method:'PUT' }); fetchTodos(); }
    async function deleteTask(i) { await fetch(`/api/todos/${i}`, { method:'DELETE' }); fetchTodos(); }

    fetchTodos();
  </script>
</body>
</html>
